<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <title>Exercise 3</title>
    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 150%;
        }
    </style>
    <script src="NumberChecker.js" ></script>
    <script src="util.js" ></script>
    <script>
        window.onload = function() {

            document.querySelector('button').addEventListener('click',DisplayStats);
            
        }

        function DisplayStats() {
            //1. Get the input from user
            let inputString = document.getElementById('values').value;
            let keyInputString = document.getElementById('key').value;
            
            //2. Split the values
            let inputStringArray = inputString.split(',');

            //3. Validate if input is not a Number and Convert them to numbers
            //3.1 Validate key
            let key = 0;
            if(!isInteger(keyInputString)) {
                DisplayHTMLMessage('error','key must be integer number');
                CleanResults('input','output');
                return;
            } else {
                key = Number(keyInputString);
                CleanResults('error');
            }
            //3.2 Validate numbers
            let inputNumbersArray = [];
            for(let i = 0; i < inputStringArray.length; i++){
                let item = inputStringArray[i];

                if (!isInteger(item)) { // Validation
                    DisplayHTMLMessage('error',"All inputs must be integer numbers");
                    CleanResults('input','output');
                    return;
                } else {
                    inputNumbersArray.push(Number(item)); //Convertion
                    CleanResults('error');
                }
            }
            
            // 4 Count how many times the key apperas
            let howManyTimesTheKeyAppears = 0;
            
            for (let i = 0; i < inputNumbersArray.length; i++) {
                
                if (key == inputNumbersArray[i]){
                    howManyTimesTheKeyAppears++;
                }
            }
            //8. Display the results
            document.getElementById('input').innerHTML = BuildElementResult('Nums: ' + inputString,'Key: ' + keyInputString);
                        
            document.getElementById('output').innerHTML = BuildElementResult(howManyTimesTheKeyAppears);
        }
    </script>

</head>

<body>
    Enter a set of coma separated values<br><br>
    Values<input id="values"><br>
    Key<input id="key">
    <button>Search</button>
    <div id="error"></div><br>
    Input:
    <div id="input"></div>
    Output:
    <div id="output"></div>
</body>

</html>