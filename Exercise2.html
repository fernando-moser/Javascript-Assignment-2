<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <title>Exercise 2</title>
    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 150%;
        }
    </style>
    <script src="NumberChecker.js" ></script>
    <script src="util.js" ></script>
    <script>
        window.onload = function() {

            document.querySelector('button').addEventListener('click',DisplayStats);
            
        }

        function DisplayStats() {
            //1. Get the input from user
            let inputString = document.querySelector('input').value;
            
            //2. Split the values
            let inputStringArray = inputString.split(',');

            //3. Validate if input is not a Number and Convert them to numbers
            let inputNumbersArray = [];
            for(let i = 0; i < inputStringArray.length; i++){
                let item = inputStringArray[i];

                if (!isInteger(item)) { // Validation
                    DisplayHTMLMessage('error',"All inputs must be integer numbers"); // Displays error message
                    CleanResults('input','output');
                    return;
                } else {
                    inputNumbersArray.push(Number(item)); //Convertion
                    DisplayHTMLMessage('error',""); // Cleans error message
                }
            }
            // inputStringArray.forEach(element => {
            //     isInteger(element) ? inputNumbersArray.push(Number(element)) : document.querySelector('#error').innerHTML = "Input must be numeric";
            // });
            
            // Next steps 4,5,6,7
            let total = 0, average, smallest = inputNumbersArray[0], largest = inputNumbersArray[0];
            
            for (let i = 0; i < inputNumbersArray.length; i++) {
                let number = inputNumbersArray[i];
                
                //4. Total = sum them up
                total += number;
                //6. Smallest
                if (smallest > number){
                    smallest = number;
                }
                //7. Largest
                if (largest < number){
                    largest = number;
                }
            }
            //5. Average = Total / num of numbers
            average = Math.round(total/inputNumbersArray.length);

            //8. Display the results
            // document.getElementById('input').innerHTML = BuildElementResult(inputString);
            SetHTMLElement('input',BuildElementResult(inputString));
            
            document.getElementById('output').innerHTML = BuildElementResult("Total: " + total,"Average: " + Math.round(average),"Smallest: " + smallest,"Largest: " + largest);
        }
    </script>

</head>

<body>
    Enter a set of coma separated values
    <input>
    <button>Stats</button>
    <div id="error"></div>
    Input:
    <div id="input"></div>
    Output:
    <div id="output"></div>
</body>

</html>